<div class="container">
  <h1>Dashboard</h1>

  <ul class="nav mb-3 nav-tabs" id="vinyl-tab" role="tablist">
    <li class="nav-item dashboard-nav">
      <a class="nav-link active" id="vinyl-bought-tab" data-toggle="pill" href="#vinyl-bought" role="tab" aria-controls="vinyl-bought" aria-selected="true">Bought</a>
    </li>
    <li class="nav-item dashboard-nav" id="vinyl-tab">
      <a class="nav-link" id="vinyl-sold-tab" data-toggle="pill" href="#vinyl-sold" role="tab" aria-controls="vinyl-sold" aria-selected="false">Sold</a>
    </li>
    <li class="nav-item dashboard-nav" id="vinyl-tab">
      <a class="nav-link" id="vinyl-owned-tab" data-toggle="pill" href="#vinyl-owned" role="tab" aria-controls="vinyl-owned" aria-selected="false">Owned</a>
    </li>
  </ul>

  <div class="tab-content" id="vinyl-tabContent">
    <div class="tab-pane fade show active" id="vinyl-bought" role="tabpanel" aria-labelledby="vinyl-bought-tab">
      <h2>Pending</h2>
      <div class="cards-dashboard my-3">
        <% @bookings_bought_pending.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
      <h2>Upcoming</h2>
      <div class="cards-dashboard my-3">
        <% @bookings_bought_upcoming.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
      <h2>Completed</h2>
        <div class="cards-dashboard my-3">
        <% @bookings_bought_completed.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
      <h2>Cancelled</h2>
        <div class="cards-dashboard my-3">
        <% @bookings_bought_cancelled.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
    </div>
    <div class="tab-pane fade" id="vinyl-sold" role="tabpanel" aria-labelledby="vinyl-sold-tab">

      <h2>You have <%= pluralize @bookings_sold_pending.size, "request" %>! </h2>
      <div class="cards-dashboard my-3">
        <% @bookings_sold_pending.each do |booking| %>
              <div class="card-trip card-trip-sold">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates-sold"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing-sold"> <%= booking.vinyl.daily_rate %> €/day</h2>
                    <div class="accept-decline-sold">
                      <%= simple_form_for(booking, as: :booking, method: :patch, url: vinyl_booking_path(current_user, booking)) do |f| %>
                        <%= f.hidden_field :status, :value => "Cancelled" %>
                        <%= button_tag(type: "submit", class:"submit-accept-decline-sold") do %>
                          <i class="far fa-times-circle"></i>
                        <% end %>
                      <% end %>
                      <%= simple_form_for(booking, as: :booking, method: :patch, url: vinyl_booking_path(current_user, booking)) do |f| %>
                        <%= f.hidden_field :status, :value => "Upcoming" %>
                        <%= button_tag(type: "submit", class:"submit-accept-decline-sold") do %>
                          <i class="far fa-check-circle"></i>
                        <% end %>
                      <% end %>
                    </div>
                  </div>
                </div>
              </div>

        <% end %>
      </div>
      <h2>Upcoming</h2>
      <div class="cards-dashboard my-3">
        <% @bookings_sold_upcoming.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
      <h2>Completed</h2>
        <div class="cards-dashboard my-3">
        <% @bookings_sold_completed.each do |booking| %>
            <%= link_to vinyl_path(booking.vinyl) do %>
              <div class="card-trip">
                <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                  </div>
                  <div class="booking-info">
                    <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                    <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                  </div>
                </div>
              </div>
            <% end %>
        <% end %>
      </div>
      <h2>Cancelled</h2>
        <div class="cards-dashboard my-3">
          <% @bookings_sold_cancelled.each do |booking| %>
              <%= link_to vinyl_path(booking.vinyl) do %>
                <div class="card-trip">
                  <% if booking.vinyl.photo.attached? %>
                  <%= image_tag booking.vinyl.photo %>
                <% else %>
                  <img src="https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg" alt="record photo placeholder">
                <% end %>
                  <div class="card-trip-infos">
                    <div class="card-trip-text">
                      <h2><strong><%= booking.vinyl.album_name %></strong> by <strong><%= booking.vinyl.artist %></strong></h2>
                    </div>
                    <div class="booking-info">
                      <p class="card-trip-dates"><%= booking.start_date %> to <%= booking.end_date %></p>
                      <h2 class="card-trip-pricing"> <%= booking.vinyl.daily_rate %> €/day </h2>
                    </div>
                  </div>
                </div>
              <% end %>
          <% end %>
        </div>
    </div>
    <div class="tab-pane fade" id="vinyl-owned" role="tabpanel" aria-labelledby="vinyl-owned-tab">
        <div class="cards-dashboard my-3">
          <% @vinyls_owned.each do |vinyl| %>
              <div class="card-trip">
                <%= link_to edit_vinyl_path(vinyl) do %>
                  <i class="fas fa-pen-square"></i>
                <% end %>
                <% if vinyl.photo.attached? %>
                    <div style="background-image: linear-gradient(180deg, rgba(0,0,0,0.3984944319524685) 15%, rgba(0,0,0,0.3533788515406162) 42%, rgba(0,0,0,0) 100%), url('<%= cl_image_path vinyl.photo.key %>'); height: 196px; background-size: cover;"></div>

                  <%#= image_tag vinyl.photo, style:"background: linear-gradient(180deg, rgba(0,0,0,0.8802871490393032) 15%, rgba(0,0,0,0.3533788515406162) 42%, rgba(0,0,0,0) 100%)" %>
                <% else %>
                  <div style="background-image: linear-gradient(180deg, rgba(0,0,0,0.3984944319524685) 15%, rgba(0,0,0,0.3533788515406162) 42%, rgba(0,0,0,0) 100%), url(https://res.cloudinary.com/dafu5yrkg/image/upload/v1630417136/homepage_image_tcwzjl.jpg); height: 196px; background-size: cover;"></div>
                <% end %>

                <div class="card-trip-infos">
                  <div class="card-trip-text">
                    <h2><strong><%= vinyl.album_name %></strong> by <strong><%= vinyl.artist %></strong></h2>
                  </div>
                  <%= link_to vinyl_path(vinyl), method: :delete do %>
                    <i class="fas fa-trash-alt"></i>
                  <% end %>
                </div>
              </div>
          <% end %>
        </div>
    </div>
  </div>
</div>
